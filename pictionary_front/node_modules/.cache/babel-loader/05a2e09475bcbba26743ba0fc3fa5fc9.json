{"ast":null,"code":"import _slicedToArray from \"/home/benoit/Documents/Lab/pictionnary crash_test/pictionary_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nconst useChat = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        messages = _useState2[0],\n        setMessages = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        players = _useState4[0],\n        setPlayers = _useState4[1];\n\n  const socketRef = useRef();\n  const token = localStorage.getItem('token');\n  const partyID = localStorage.getItem('partyID');\n  const x = 100,\n        y = 100;\n  const points = [(x, y)];\n  useEffect(() => {\n    socketRef.current = socketIOClient('http://localhost:7001');\n    socketRef.current.emit(\"new-user\", {\n      partyID,\n      token\n    });\n    socketRef.current.on(\"newChatMessage\", ({\n      message\n    }) => {\n      setMessages(messages => [message, ...messages]);\n    });\n    socketRef.current.on(\"playerList\", playerList => {\n      setPlayers(playerList);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [token, partyID]);\n\n  const sendMessage = ({\n    message\n  }) => {\n    console.log(message);\n    console.log(partyID);\n    socketRef.current.emit(\"newChatMessage\", {\n      message,\n      token,\n      partyID\n    });\n  };\n\n  console.log(players);\n  return {\n    messages,\n    sendMessage,\n    players\n  };\n};\n\nexport default useChat;","map":{"version":3,"sources":["/home/benoit/Documents/Lab/pictionnary crash_test/pictionary_front/src/components/Ingame/_useGame.js"],"names":["useEffect","useRef","useState","socketIOClient","useChat","messages","setMessages","players","setPlayers","socketRef","token","localStorage","getItem","partyID","x","y","points","current","emit","on","message","playerList","disconnect","sendMessage","console","log"],"mappings":";AAAA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;AAEA,MAAMC,OAAO,GAAG,MAAM;AAAA,oBACcF,QAAQ,CAAC,EAAD,CADtB;AAAA;AAAA,QACXG,QADW;AAAA,QACDC,WADC;;AAAA,qBAEYJ,QAAQ,CAAC,EAAD,CAFpB;AAAA;AAAA,QAEXK,OAFW;AAAA,QAEFC,UAFE;;AAGlB,QAAMC,SAAS,GAAGR,MAAM,EAAxB;AACA,QAAMS,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,OAAO,GAAGF,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAhB;AALkB,QAMXE,CANW,GAML,GANK;AAAA,QAMTC,CANS,GAMD,GANC;AAOlB,QAAMC,MAAM,GAAG,EAAEF,CAAC,EAACC,CAAJ,EAAf;AAEAf,EAAAA,SAAS,CAAC,MAAM;AACZS,IAAAA,SAAS,CAACQ,OAAV,GAAoBd,cAAc,CAAC,uBAAD,CAAlC;AAEAM,IAAAA,SAAS,CAACQ,OAAV,CAAkBC,IAAlB,CAAuB,UAAvB,EAAmC;AAACL,MAAAA,OAAD;AAAUH,MAAAA;AAAV,KAAnC;AAEAD,IAAAA,SAAS,CAACQ,OAAV,CAAkBE,EAAlB,CAAqB,gBAArB,EAAuC,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAgB;AACnDd,MAAAA,WAAW,CAACD,QAAQ,IAAI,CAACe,OAAD,EAAS,GAAGf,QAAZ,CAAb,CAAX;AACH,KAFD;AAIAI,IAAAA,SAAS,CAACQ,OAAV,CAAkBE,EAAlB,CAAqB,YAArB,EAAoCE,UAAD,IAAe;AAC9Cb,MAAAA,UAAU,CAACa,UAAD,CAAV;AACH,KAFD;AAIA,WAAO,MAAM;AACTZ,MAAAA,SAAS,CAACQ,OAAV,CAAkBK,UAAlB;AAEH,KAHD;AAIH,GAjBQ,EAiBN,CAACZ,KAAD,EAAQG,OAAR,CAjBM,CAAT;;AAmBA,QAAMU,WAAW,GAAG,CAAC;AAACH,IAAAA;AAAD,GAAD,KAAe;AAC/BI,IAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAZ;AACAJ,IAAAA,SAAS,CAACQ,OAAV,CAAkBC,IAAlB,CAAuB,gBAAvB,EAAyC;AAACE,MAAAA,OAAD;AAAUV,MAAAA,KAAV;AAAiBG,MAAAA;AAAjB,KAAzC;AACH,GAJD;;AAKAW,EAAAA,OAAO,CAACC,GAAR,CAAYlB,OAAZ;AACA,SAAO;AAACF,IAAAA,QAAD;AAAWkB,IAAAA,WAAX;AAAwBhB,IAAAA;AAAxB,GAAP;AACH,CAnCD;;AAqCA,eAAeH,OAAf","sourcesContent":["import {useEffect, useRef, useState} from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nconst useChat = () => {\n    const [messages, setMessages] = useState([]);\n    const [players, setPlayers] = useState([]);\n    const socketRef = useRef();\n    const token = localStorage.getItem('token');\n    const partyID = localStorage.getItem('partyID');\n    const [x,y]=[100,100];\n    const points = [(x,y)];\n\n    useEffect(() => {\n        socketRef.current = socketIOClient('http://localhost:7001');\n\n        socketRef.current.emit(\"new-user\", {partyID, token});\n\n        socketRef.current.on(\"newChatMessage\", ({ message })=> {\n            setMessages(messages => [message,...messages])\n        });\n\n        socketRef.current.on(\"playerList\", (playerList)=> {\n            setPlayers(playerList)\n        });\n        \n        return () => {\n            socketRef.current.disconnect();\n            \n        };\n    }, [token, partyID])\n\n    const sendMessage = ({message}) => {\n        console.log(message)\n        console.log(partyID)\n        socketRef.current.emit(\"newChatMessage\", {message, token, partyID})\n    }\n    console.log(players)\n    return {messages, sendMessage, players};\n}\n\nexport default useChat;"]},"metadata":{},"sourceType":"module"}